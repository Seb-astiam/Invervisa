@if (loading) { 
<div class="loading-container">
    <div class="loading-spinner"></div>
    <p>Cargando producto...</p>
</div>
}

@if (product) {
<div class="product-container">
    <div class="product-header">
        <a [routerLink]="['/productos']" class="back-link">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M19 12H5M12 19l-7-7 7-7"/>
            </svg>
            Volver a productos
        </a>
    </div>

    <div class="product-content">
        <div class="product-image-section">
            <div class="image-container">
                @if (product.imageUrl) {
                <img [src]="product.imageUrl" [alt]="product.name" class="product-image"/>
                } @else {
                <div class="placeholder-image">
                    <svg width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1">
                        <rect x="3" y="3" width="18" height="18" rx="2" ry="2"/>
                        <circle cx="8.5" cy="8.5" r="1.5"/>
                        <path d="M21 15l-5-5L5 21"/>
                    </svg>
                    <span>Sin imagen</span>
                </div>
                }
            </div>
        </div>

        <div class="product-info-section">
            <div class="product-header-info">
                @if (product.brand) {
                <div class="brand-badge">{{ product.brand }}</div>
                }
                <h1 class="product-title">{{ product.name }}</h1>
                @if (product.description) {
                <p class="product-description">{{ product.description }}</p>
                }
            </div>

            <div class="product-pricing">
                @if (product.discount > 0) {
                <div class="price-container">
                    <span class="current-price">{{ api.priceWithDiscount(product.price, product.discount) | currency:'COP':'symbol-narrow':'1.0-0'  }}</span>
                    <span class="original-price">{{ product.price | currency:'COP':'symbol-narrow':'1.0-0'  }}</span>
                    <span class="discount-badge">-{{ product.discount }}%</span>
                </div>
                } @else {
                <div class="price-container">
                    <span class="current-price">{{ product.price | currency:'COP':'symbol-narrow':'1.0-0'  }}</span>
                </div>
                }
            </div>

            <div class="product-actions">
                <div class="quantity-section">
                    <label for="quantity" class="quantity-label">Cantidad:</label>
                    <div class="quantity-controls">
                        <button type="button" class="quantity-btn" (click)="decreaseQuantity()" [disabled]="qty <= 1">-</button>
                        <input 
                            id="quantity" 
                            class="quantity-input" 
                            type="number" 
                            [(ngModel)]="qty" 
                            min="1" 
                            max="99"
                        />
                        <button type="button" class="quantity-btn" (click)="increaseQuantity()">+</button>
                    </div>
                </div>

                <button (click)="addToCart()" class="add-to-cart-btn">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M9 22a1 1 0 1 0 0-2 1 1 0 0 0 0 2z"/>
                        <path d="M20 22a1 1 0 1 0 0-2 1 1 0 0 0 0 2z"/>
                        <path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"/>
                    </svg>
                    Agregar al carrito
                </button>
            </div>
        </div>
    </div>

    <div class="product-footer">
        <a [routerLink]="['/productos/browse']" class="browse-categories-link">
            Explorar otras categor√≠as
        </a>
    </div>
</div>
}
